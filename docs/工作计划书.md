# 云原生博客与知识库系统 - 工作计划书（静态前端 → 接口文档 → 后端 → 部署）

本文档按你当前的实施偏好组织工作顺序：**先做可跳转的静态前端**（可展示 UI/流程），再写**接口文档**（先定契约），再实现**后端微服务**，最后完成**容器化与上线**。不规定具体时间节点；最后一步为扩展功能（后续再讨论）。

---

## 如何使用本计划（打勾看进度）

- **打勾**：把该步骤前的 `- [ ]` 改成 `- [x]`（在方括号里输入字母 x），保存后即可看到勾选效果。
- **看进度**：往下扫一眼，所有已勾选的就是「已完成」，第一个未勾的就是「当前该做的」。
- **阶段验收**：每个阶段末尾都有“验收点”，达到即代表阶段完成，可用于答辩阶段性展示。

---

## 阶段 0：准备（仓库规范 + 文档齐全）

**目标**：仓库结构清晰、忽略规则正确、关键文档齐全，为后续开发提供稳定基础。

- [X]  **0.1** 确认根目录 `.gitignore` 覆盖：`target/`、`node_modules/`、`.idea/`、`*.iml`、`dist/`、`.env.local` 等；缺什么补什么。
- [X]  **0.2** 确认已有文档：`docs/任务书.txt`、`docs/技术栈.md`、本 `docs/工作计划书.md`；根目录有 `README.md`。
- [ ]  **0.3** （可选）在 `docs/` 新增占位：`API接口文档.md`（下一阶段会写）、`数据库设计.md`（可选）。

**验收点**：仓库干净（无构建产物被提交）、文档入口清晰。

---

## 阶段 1：可跳转的静态前端（先不依赖后端）

**目标**：在没有后端的情况下，也能演示完整 UI 流程：页面跳转、布局、表单交互、后台界面结构（数据可用 mock）。

- [ ]  **1.1** `frontend/` 能 `npm install` 与 `npm run dev` 正常启动，浏览器可打开首页。
- [ ]  **1.2** 路由与页面骨架齐全：`/`（首页/列表）、`/login`（登录/注册）、`/article/:id`（详情）、`/admin`（后台布局 + 子页面）。
- [ ]  **1.3** 首页（静态/Mock）：文章卡片列表（标题/摘要/时间），点击跳转详情页。
- [ ]  **1.4** 文章详情（静态/Mock）：标题、正文区域、返回按钮；预留评论区位置（先不接接口）。
- [ ]  **1.5** 登录页（静态/Mock）：用户名/密码表单、登录/注册按钮；按钮点击先做前端校验与提示（先不调用后端也行）。
- [ ]  **1.6** 后台布局：左侧菜单 + 顶栏 + 内容区（`/admin/articles` 文章管理页面）。
- [ ]  **1.7** 文章管理页（静态/Mock）：表格 + 分页 + “新建/编辑/删除”按钮（先不做实际请求）。
- [ ]  **1.8** 统一 UI 风格：Element Plus 全局引入、基础样式可用，页面不报错、不白屏。

**验收点**：答辩可现场演示：从首页 → 详情 → 登录 → 后台 → 文章管理，所有跳转与交互顺畅（即使数据为 mock）。

---

## 阶段 2：接口文档（先定契约）

**目标**：把“前端需要什么、后端提供什么”写清楚，保证后端开发按文档实现、前端按文档调用，不反复改。

- [ ]  **2.1** 在 `docs/` 新建并维护 `API接口文档.md`（或你已有同名文件就直接补内容）。
- [ ]  **2.2** 约定统一规则：API 前缀（如 `/api`）、鉴权方式（JWT：`Authorization: Bearer <token>`）、统一返回结构（如 `code/message/data`）。
- [ ]  **2.3** user-service 接口：注册、登录、（可选）获取当前用户；写清 URL/Method/Body/返回示例/错误码。
- [ ]  **2.4** blog-service 接口：文章列表（分页）、文章详情、（后台）文章新增/更新/删除；分类/标签列表与管理（按你 UI 需要定）。
- [ ]  **2.5** comment-service 接口：按文章查评论、发表评论（可选删除/回复）；写清参数与返回示例。
- [ ]  **2.6** 网关约定：路由映射（例如 `/api/user/**`、`/api/blog/**`、`/api/comments/**`），跨域策略说明。
- [ ]  **2.7** 形成一份“前端调用清单”：每个页面会调用哪些接口（把 Home/Detail/Login/Admin 对应接口列出来）。

**验收点**：仅看接口文档就能写出前端请求代码；后端能按文档逐条实现并自测。

---

## 阶段 3：后端实现（按接口文档逐条落地）

**目标**：把接口文档中的核心接口全部实现，并可用 Postman/REST Client 自测通过。

### 3.1 基础设施（MySQL 用 Docker，脚本可复用）

- [ ]  **3.1.1** 确认 `infrastructure/` 目录存在，`infrastructure/docker-compose.yml` 可启动 MySQL。
- [ ]  **3.1.2** 在 `infrastructure/mysql/` 以“一表一文件”完善建表脚本：`00_init.sql`、`01_user.sql`、`02_category.sql`、`03_tag.sql`、`04_article.sql`、`05_article_tag.sql`、`06_comment.sql`（按外键依赖顺序）。
- [ ]  **3.1.3** `docker-compose down -v` 后 `docker-compose up -d`，确认库/表都创建成功。

### 3.2 user-service（注册/登录/JWT）

- [ ]  **3.2.1** `services/user-service/` 补齐依赖：MySQL 驱动、MyBatis Plus、Spring Security、JWT、Lombok。
- [ ]  **3.2.2** 写 `application.yml`：端口、数据库连接等。
- [ ]  **3.2.3** 写实体/Mapper/Service/Controller：注册与登录；密码加密；返回 JWT。
- [ ]  **3.2.4** 用 Postman/REST Client 自测：注册成功、登录返回 token。

### 3.3 blog-service（文章/分类/标签）

- [ ]  **3.3.1** 创建 `services/blog-service/` Spring Boot 工程与依赖（MyBatis Plus + MySQL）。
- [ ]  **3.3.2** 按接口文档实现：文章列表（分页）、文章详情。
- [ ]  **3.3.3** 按后台需要实现：文章新增/更新/删除；分类/标签接口（按你文档定义）。
- [ ]  **3.3.4** 自测：接口返回结构与文档一致。

### 3.4 comment-service（评论）

- [ ]  **3.4.1** 创建 `services/comment-service/` 工程与依赖。
- [ ]  **3.4.2** 实现：评论列表、发表评论；必要时校验文章存在（可先不做跨服务调用，后续再加）。
- [ ]  **3.4.3** 自测：能按文章查评论、能发表评论。

### 3.5 gateway（路由/跨域/鉴权可后置）

- [ ]  **3.5.1** 创建 `gateway/` 工程，配置路由：`/api/user/**`、`/api/blog/**`、`/api/comments/**` 分别转发到对应服务。
- [ ]  **3.5.2** 配置 CORS（保证前端能跨域调用）。
- [ ]  **3.5.3** （可选）实现 JWT 统一鉴权（放行 login/register，其余需要 token）。

**验收点**：不用前端也能用工具把 user/blog/comment 的核心接口按文档跑通；网关路由能正确转发。

---

## 阶段 4：前后端联调（把静态页面换成真实接口）

**目标**：把阶段 1 的 mock 数据逐步替换为真实接口调用，形成可实际使用的系统。

- [ ]  **4.1** 前端请求层统一：`src/api/request.ts` 正常带 token、处理 401、错误提示可用。
- [ ]  **4.2** 登录页联调：`/api/user/register`、`/api/user/login` 通；token 存储与跳转正常。
- [ ]  **4.3** 首页联调：文章列表从 `/api/blog/...` 获取并渲染；分页参数与文档一致。
- [ ]  **4.4** 详情页联调：文章详情接口通；（可选）评论列表与发表评论接口通。
- [ ]  **4.5** 后台联调：文章管理页能调文章 CRUD；必要时加路由守卫与按钮权限提示。
- [ ]  **4.6** （可选）网关统一鉴权开启后，前端能正确携带 token 访问受保护接口。

**验收点**：用户从前端完成“注册/登录 → 浏览文章 → 看详情 →（可选）评论 → 后台管理文章”的核心流程。

---

## 阶段 5：部署上线（容器化 + K8s + CI/CD）

**目标**：满足任务书硬性指标：微服务≥3、全部容器化、K8s 编排、具备 CI/CD；并可演示高可用/滚动更新。

- [ ]  **5.1** 每个服务写 Dockerfile：user-service、blog-service、comment-service、gateway（多阶段构建）。
- [ ]  **5.2** 前端构建与部署：`npm run build` 产物可用；选择静态托管（Nginx 镜像）或直接由网关/独立服务提供。
- [ ]  **5.3** （可选）写 `deploy/docker-compose.yml` 实现“一键起全栈”（便于本地/演示）。
- [ ]  **5.4** 写 `deploy/k8s/`：各服务 Deployment/Service；配置用 ConfigMap/Secret；需要对外则 Ingress 暴露 gateway/前端。
- [ ]  **5.5** 写 CI/CD：构建（后端+前端）→ 构建镜像 → 推送镜像 →（可选）部署到 K8s。
- [ ]  **5.6** 演示项：滚动更新或副本扩缩容；（可选）模拟某个实例挂掉，观察自动恢复。

**验收点**：K8s 集群中服务均 Running；通过浏览器访问系统核心功能可用；CI/CD 可重复运行。

---

## 阶段 6：扩展功能（后续讨论）

- [ ]  **6.1** 与需求一起确定扩展内容（如全文搜索、文件上传、统计报表、权限细化、可观测性增强等），再拆成细步骤并逐项打勾。

---

## 进度小结（按阶段）


| 阶段 | 内容                             | 你做到哪了？看该阶段第一个未勾的步骤编号即可 |
| ---- | -------------------------------- | -------------------------------------------- |
| 0    | 准备（仓库规范 + 文档）          | 0.1 ~ 0.3                                    |
| 1    | 可跳转静态前端（可演示 UI 流程） | 1.1 ~ 1.8                                    |
| 2    | 接口文档（契约）                 | 2.1 ~ 2.7                                    |
| 3    | 后端实现（按文档落地）           | 3.1.1 ~ 3.5.3                                |
| 4    | 前后端联调（替换 mock）          | 4.1 ~ 4.6                                    |
| 5    | 部署上线（Docker + K8s + CI/CD） | 5.1 ~ 5.6                                    |
| 6    | 扩展功能                         | 6.1（后续讨论）                              |

完成阶段 3～5 即满足任务书硬性指标（微服务≥3、容器化、K8s、CI/CD）；阶段 1～2 适合先做展示与“契约固化”，降低后端返工。阶段 6 用于加分与扩展，内容后续再定。
